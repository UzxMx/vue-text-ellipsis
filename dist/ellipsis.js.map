{"version":3,"file":"ellipsis.js","sources":["../src/ellipsis/core.js","../src/ellipsis/config.js","../src/ellipsis/resize-event.js","../src/ellipsis/ellipsis.vue","../src/index_global.js"],"sourcesContent":["// const getLengthByCanvas = (ctx, font = {}) => {\n//     const weight = font.fontWeight;\n//     const size = font.fontSize;\n//     const family = font.fontFamily;\n//     ctx.font = `${weight} ${size} ${family}`;\n\n//     return ctx.measureText(font.value).width;\n// };\nconst getLengthByDom = (span, font = {}) => {\n    span.innerText = font.value;\n    // 因为offsetWidth存在四舍五入 降低精度\n    return span.offsetWidth + 0.5;\n};\n\nexport default (font = {}, span) => {\n    let beginLine = 1;\n    let index = 0;\n    const line = [];\n\n    for (let i = 0; i <= font.text.length; i++) {\n        if (beginLine > font.lineNum) break;\n        const left = beginLine === parseInt(font.lineNum, 10) ? font.left : '';\n        const str = font.text.substr(index, i - index) + left;\n        const len = getLengthByDom(\n            span,\n            Object.assign({ value: str }, font),\n        );\n        // console.log(str, len);\n        if (len <= parseFloat(font.width, 10)) {\n            line[beginLine - 1] = str;\n        } else {\n            i--;\n            beginLine++;\n            index = i;\n        }\n    }\n\n    return line;\n};\n","export const userConfig = {\n    width: '50px',\n    lineNum: 2,\n    fontFamily: 'microsoft yahei',\n    fontWeight: 'bold',\n    fontSize: '14px',\n    left: '...',\n    tagName: 'p',\n    isImmediate: true,\n};\n\nexport const assignConfig = (conf) => {\n    Object.assign(userConfig, conf);\n};\n","/* Modified from https://github.com/sdecima/javascript-detect-element-resize\n * version: 0.5.3\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2013 Sebastián Décima\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\n * this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to\n * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n * the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n */\n/* eslint-disable */\nconst isServer = typeof window === 'undefined';\n\n/* istanbul ignore next */\nconst requestFrame = (function() {\n    if (isServer) return;\n    const raf =\n        window.requestAnimationFrame ||\n        window.mozRequestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        function(fn) {\n            return window.setTimeout(fn, 20);\n        };\n    return function(fn) {\n        return raf(fn);\n    };\n})();\n\n/* istanbul ignore next */\nconst cancelFrame = (function() {\n    if (isServer) return;\n    const cancel =\n        window.cancelAnimationFrame ||\n        window.mozCancelAnimationFrame ||\n        window.webkitCancelAnimationFrame ||\n        window.clearTimeout;\n    return function(id) {\n        return cancel(id);\n    };\n})();\n\n/* istanbul ignore next */\nconst resetTrigger = function(element) {\n    const trigger = element.__resizeTrigger__;\n    const expand = trigger.firstElementChild;\n    const contract = trigger.lastElementChild;\n    const expandChild = expand.firstElementChild;\n\n    contract.scrollLeft = contract.scrollWidth;\n    contract.scrollTop = contract.scrollHeight;\n    expandChild.style.width = expand.offsetWidth + 1 + 'px';\n    expandChild.style.height = expand.offsetHeight + 1 + 'px';\n    expand.scrollLeft = expand.scrollWidth;\n    expand.scrollTop = expand.scrollHeight;\n};\n\n/* istanbul ignore next */\nconst checkTriggers = function(element) {\n    return (\n        element.offsetWidth !== element.__resizeLast__.width ||\n        element.offsetHeight !== element.__resizeLast__.height\n    );\n};\n\n/* istanbul ignore next */\nconst scrollListener = function(event) {\n    resetTrigger(this);\n    if (this.__resizeRAF__) cancelFrame(this.__resizeRAF__);\n    this.__resizeRAF__ = requestFrame(() => {\n        if (checkTriggers(this)) {\n            this.__resizeLast__.width = this.offsetWidth;\n            this.__resizeLast__.height = this.offsetHeight;\n            this.__resizeListeners__.forEach(fn => {\n                fn.call(this, event);\n            });\n        }\n    });\n};\n\n/* Detect CSS Animations support to detect element display/re-attach */\nconst attachEvent = isServer ? {} : document.attachEvent;\nconst DOM_PREFIXES = 'Webkit Moz O ms'.split(' ');\nconst START_EVENTS = 'webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(\n    ' ',\n);\nconst RESIZE_ANIMATION_NAME = 'resizeanim';\nlet animation = false;\nlet keyFramePrefix = '';\nlet animationStartEvent = 'animationstart';\n\n/* istanbul ignore next */\nif (!attachEvent && !isServer) {\n    const testElement = document.createElement('fakeelement');\n    if (testElement.style.animationName !== undefined) {\n        animation = true;\n    }\n\n    if (animation === false) {\n        let prefix = '';\n        for (var i = 0; i < DOM_PREFIXES.length; i++) {\n            if (\n                testElement.style[DOM_PREFIXES[i] + 'AnimationName'] !==\n                undefined\n            ) {\n                prefix = DOM_PREFIXES[i];\n                keyFramePrefix = '-' + prefix.toLowerCase() + '-';\n                animationStartEvent = START_EVENTS[i];\n                animation = true;\n                break;\n            }\n        }\n    }\n}\n\nlet stylesCreated = false;\n/* istanbul ignore next */\nconst createStyles = function() {\n    if (!stylesCreated && !isServer) {\n        const animationKeyframes = `@${keyFramePrefix}keyframes ${RESIZE_ANIMATION_NAME} { from { opacity: 0; } to { opacity: 0; } } `;\n        const animationStyle = `${keyFramePrefix}animation: 1ms ${RESIZE_ANIMATION_NAME};`;\n\n        // opacity: 0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n        const css = `${animationKeyframes}\n      .resize-triggers { ${animationStyle} visibility: hidden; opacity: 0; }\n      .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \\\" \\\"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1 }\n      .resize-triggers > div { background: #eee; overflow: auto; }\n      .contract-trigger:before { width: 200%; height: 200%; }`;\n\n        const head = document.head || document.getElementsByTagName('head')[0];\n        const style = document.createElement('style');\n\n        style.type = 'text/css';\n        if (style.styleSheet) {\n            style.styleSheet.cssText = css;\n        } else {\n            style.appendChild(document.createTextNode(css));\n        }\n\n        head.appendChild(style);\n        stylesCreated = true;\n    }\n};\n\n/* istanbul ignore next */\nexport const addResizeListener = function(element, fn) {\n    if (isServer) return;\n    if (attachEvent) {\n        element.attachEvent('onresize', fn);\n    } else {\n        if (!element.__resizeTrigger__) {\n            if (getComputedStyle(element).position === 'static') {\n                element.style.position = 'relative';\n            }\n            createStyles();\n            element.__resizeLast__ = {};\n            element.__resizeListeners__ = [];\n\n            const resizeTrigger = (element.__resizeTrigger__ = document.createElement(\n                'div',\n            ));\n            resizeTrigger.className = 'resize-triggers';\n            resizeTrigger.innerHTML =\n                '<div class=\"expand-trigger\"><div></div></div><div class=\"contract-trigger\"></div>';\n            element.appendChild(resizeTrigger);\n\n            resetTrigger(element);\n            element.addEventListener('scroll', scrollListener, true);\n\n            /* Listen for a css animation to detect element display/re-attach */\n            if (animationStartEvent) {\n                resizeTrigger.addEventListener(animationStartEvent, function(\n                    event,\n                ) {\n                    if (event.animationName === RESIZE_ANIMATION_NAME) {\n                        resetTrigger(element);\n                    }\n                });\n            }\n        }\n        element.__resizeListeners__.push(fn);\n    }\n};\n\n/* istanbul ignore next */\nexport const removeResizeListener = function(element, fn) {\n    if (!element || !element.__resizeListeners__) return;\n    if (attachEvent) {\n        element.detachEvent('onresize', fn);\n    } else {\n        element.__resizeListeners__.splice(\n            element.__resizeListeners__.indexOf(fn),\n            1,\n        );\n        if (!element.__resizeListeners__.length) {\n            element.removeEventListener('scroll', scrollListener);\n            element.__resizeTrigger__ = !element.removeChild(\n                element.__resizeTrigger__,\n            );\n        }\n    }\n};\n","<script>\n    import core from './core';\n    import { userConfig } from './config';\n    import { addResizeListener, removeResizeListener }from './resize-event';\n\n    export default {\n        name: 'ellipsis',\n        props: {\n            text: {\n                type: String,\n                default: '',\n            },\n            width: {\n                type: String,\n            },\n            //lineHeight: {\n            //    type: String,\n            //    default: '14px',\n            //},\n            lineNum: {\n                type: Number,\n            },\n            fontFamily: {\n                type: String,\n            },\n            fontWeight: {\n                type: String | Number,\n            },\n            fontSize: {\n                type: String,\n            },\n            left: {\n                type: String,\n            },\n            tagName: {\n                type: String,\n                default: userConfig.tagName,\n            },\n            isImmediate: {\n                type: Boolean,\n                default: userConfig.isImmediate,\n            },\n            collapsed: {\n                type: Boolean,\n                default: true\n            }\n        },\n        data() {\n            return {\n                textArr: [],\n                span: '',\n                parentWidth: '',\n                resizeEvent: '',\n            };\n        },\n        render() {\n            const item = this.textArr.map((item) => {\n                return <this.tagName class=\"ellipsis\">{item}</this.tagName>;\n            });\n            return (\n                <div>\n                    {item}\n                </div>\n            )\n        },\n        watch: {\n            width: function () {\n                this.update();\n            },\n            text: function () {\n                this.update()\n            },\n            collapsed: function () {\n                this.update()\n            }\n        },\n        methods: {\n            init() {\n                // 初始化\n                if (this.collapsed) {\n                    this.span  = document.createElement('span');\n                    this.span.style.opacity = 0;\n                    this.span.style['white-space'] = 'nowrap';\n                    this.span.style['font-weight'] = this.fontWeight || userConfig.fontWeight;\n                    this.span.style['font-family'] = this.fontFamily || userConfig.fontFamily;\n                    this.span.style['font-size'] = this.fontSize|| userConfig.fontSize;\n                    document.body.append(this.span);\n                    const font = {\n                        text: this.text,\n                        width: this.parentWidth || parseFloat(getComputedStyle(this.$el.parentElement).width, 10),\n                        lineHeight: this.lineHeight || userConfig.lineHeight,\n                        lineNum: this.lineNum || userConfig.lineNum,\n                        fontFamily: this.fontFamily || userConfig.fontFamily,\n                        fontSize: this.fontSize || userConfig.fontSize,\n                        fontWeight: this.fontWeight || userConfig.fontWeight,\n                        left: this.left || userConfig.left,\n                    };\n                    this.textArr = core(font, this.span);\n                } else {\n                    this.textArr = [this.text]\n                }\n                this.destory();\n            },\n            destory() {\n                if (this.span.remove) {\n                    this.span.remove();\n                }\n                this.span = '';\n            },\n            update() {\n                this.init();\n            },\n        },\n        beforeMount() {\n            if (this.width) {\n                this.parentWidth = this.width;\n                this.init();\n            }\n        },\n        mounted() {\n            if (!this.width) {\n                this.parentWidth = parseFloat(getComputedStyle(this.$el.parentElement).width, 10);\n                this.init();\n                const min = 1000;\n                let timeout;\n                let begin = new Date().getTime();\n                const that = this;\n                this.resizeEvent = () => {\n                    if (that.parentWidth === parseFloat(getComputedStyle(this.$el.parentElement).width, 10)) return;\n                    that.parentWidth = parseFloat(getComputedStyle(this.$el.parentElement).width, 10);\n                    if (that.isImmediate) {\n                        that.init();\n                    } else {\n                        const now = new Date().getTime();\n                        if (now - begin < min) {\n                            timeout = setTimeout(() => {\n                                that.init.call(that);\n                                begin = now;\n                            }, now - begin);\n                        } else {\n                            timeout = null;\n                            clearTimeout(timeout);\n                            that.init();\n                            begin = now;\n                        }\n                    }\n                };\n                addResizeListener(this.$el, this.resizeEvent);\n            }\n        },\n        destroyed() {\n            removeResizeListener(this.$el, this.resizeEvent);\n        },\n    };\n</script>\n","import Ellipsis from './ellipsis/ellipsis.vue';\nimport { assignConfig } from './ellipsis/config';\n\nconst install = (Vue, conf) => {\n    Vue.component(Ellipsis.name, Ellipsis);\n    if (conf) {\n        assignConfig(conf);\n    }\n};\n\n/* istanbul ignore if */\nif (typeof window !== 'undefined' && window.Vue) {\n    install(window.Vue);\n}\n\nexport default {\n    install,\n    Ellipsis\n};\n// module.exports = {\n//    install\n// };\n"],"names":["getLengthByDom","span","font","innerText","value","offsetWidth","beginLine","index","line","i","text","length","lineNum","left","parseInt","str","substr","len","Object","assign","parseFloat","width","userConfig","assignConfig","conf","isServer","window","requestFrame","raf","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","fn","setTimeout","cancelFrame","cancel","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","id","resetTrigger","element","trigger","__resizeTrigger__","expand","firstElementChild","contract","lastElementChild","expandChild","scrollLeft","scrollWidth","scrollTop","scrollHeight","style","height","offsetHeight","checkTriggers","__resizeLast__","scrollListener","event","__resizeRAF__","__resizeListeners__","forEach","call","attachEvent","document","DOM_PREFIXES","split","START_EVENTS","RESIZE_ANIMATION_NAME","animation","keyFramePrefix","animationStartEvent","testElement","createElement","animationName","undefined","prefix","toLowerCase","stylesCreated","createStyles","animationKeyframes","animationStyle","css","head","getElementsByTagName","type","styleSheet","cssText","appendChild","createTextNode","addResizeListener","getComputedStyle","position","resizeTrigger","className","innerHTML","addEventListener","push","removeResizeListener","detachEvent","splice","indexOf","removeEventListener","removeChild","String","Number","tagName","Boolean","isImmediate","item","textArr","map","update","collapsed","opacity","fontWeight","fontFamily","fontSize","body","append","parentWidth","$el","parentElement","lineHeight","core","destory","remove","init","min","timeout","begin","Date","getTime","that","resizeEvent","now","install","Vue","component","Ellipsis","name"],"mappings":"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"}